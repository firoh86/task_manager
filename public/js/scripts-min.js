"use strict";var clear=document.getElementById("clear"),list=document.getElementById("list"),select=document.getElementById("select"),additem=document.getElementById("add-item"),mensaje=document.getElementById("mensaje"),fecha=document.getElementById("fecha"),addbutton=document.getElementById("addToDo");clear.addEventListener("click",(function(e){for(;list.firstChild;)list.removeChild(list.firstChild);localStorage.clear()})),addbutton.addEventListener("click",(function(e){if(""===additem.getAttribute("data-color")&&(additem.dataset.color="green"),new Date(fecha.value).getTime()<(new Date).getTime())alert("la fecha esta pasada");else if(""!==mensaje.value&&""!==fecha.value){var a="id"+(new Date).getTime(),t={color:additem.dataset.color,done:!1,fecha:fecha.value,id:a,mensaje:mensaje.value};addDataToLS(t,a)}else alert("rellena los campos de fecha y mensaje")}));var addDataToLS=function(e,a){localStorage.setItem(a,JSON.stringify(e));var t=document.createDocumentFragment(),l=document.createElement("li");l.classList.add("item"),l.classList.add(e.color),l.dataset.uid=a;var n=document.createElement("div");n.classList.add("item__block");var d=document.createElement("i");d.classList.add("far","fa-circle");var s=document.createElement("p");s.classList.add("text"),s.textContent=e.mensaje;var c=document.createElement("i");c.classList.add("far","fa-trash-alt"),n.appendChild(d),n.appendChild(s);var i=document.createElement("p"),o=setInterval((function(a){var t="";""==t&&(t=list.querySelector("li:last-child")),null===t&&(clearInterval(o),console.log("ya no existe")),i.textContent="",i.classList.add("text"),i.classList.add("fecha");var l,d=muestraReloj(e.fecha);d.remainTime>0?l="DL D-".concat(d.remainDays," ").concat(d.remainHours,":").concat(d.remainMinutes,":").concat(d.remainSeconds):(l="deadline past",clearInterval(o)),i.textContent=l,n.appendChild(i)}),1e3);l.appendChild(n),l.appendChild(c),t.appendChild(l),list.appendChild(t),additem.dataset.color="",mensaje.value="",fecha.value="",additem.className="add-item ",additem.dataset.color=""};list.addEventListener("click",(function(e){"I"==e.target.tagName&&e.target.classList.contains("fa-circle")&&taskComplete(e.target),e.target.classList.contains("fa-trash-alt")&&deleteTask(e.target)}));var taskComplete=function(e){e.classList.contains("far")?e.classList.replace("far","fas"):e.classList.replace("fas","far"),e.classList.toggle("complete"),e.nextSibling.classList.toggle("complete");var a=e.parentNode.parentNode.dataset.uid,t=JSON.parse(localStorage.getItem(a));0==t.done?t.done=!0:t.done=!1;var l=JSON.stringify(t);localStorage.setItem(a,l)},deleteTask=function(e){var a=e.parentNode.dataset.uid;localStorage.removeItem(a),list.removeChild(e.parentNode)};select.addEventListener("click",(function(e){additem.className="add-item ".concat(e.target.id),additem.dataset.color=e.target.id})),window.onload=function(){list.textContent="",console.log("se ha cargado la p√°gina");var e=Object.values(localStorage),a=[],t=[];for(var l in e){var n=JSON.parse(e[l]);a.push(n.fecha),t.push(n.id),addDataToLS(n,n.id)}};var muestraReloj=function(e){var a=new Date,t=(new Date(e)-a+1e3)/1e3;return{remainSeconds:("0"+Math.floor(t%60)).slice(-2),remainMinutes:("0"+Math.floor(t/60%60)).slice(-2),remainHours:("0"+Math.floor(t/3600%24)).slice(-2),remainDays:Math.floor(t/86400),remainTime:t}};